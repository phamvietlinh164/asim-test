(this.webpackJsonpmedpro_form_content=this.webpackJsonpmedpro_form_content||[]).push([[0],{168:function(e,t,a){e.exports=a(329)},173:function(e,t,a){},174:function(e,t,a){},232:function(e,t,a){},239:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"DOMAIN_URL",(function(){return y})),a.d(n,"RESTFULL_API_URL_V2",(function(){return w})),a.d(n,"COOKIE_EXPIRES",(function(){return C})),a.d(n,"SOCKET_CHAT",(function(){return I}));var r={};a.r(r),a.d(r,"DOMAIN_URL",(function(){return S})),a.d(r,"RESTFULL_API_URL_V2",(function(){return T})),a.d(r,"COOKIE_EXPIRES",(function(){return A})),a.d(r,"SOCKET_CHAT",(function(){return N}));var o={};a.r(o),a.d(o,"DOMAIN_URL",(function(){return U})),a.d(o,"RESTFULL_API_URL_V2",(function(){return k})),a.d(o,"COOKIE_EXPIRES",(function(){return x})),a.d(o,"SOCKET_CHAT",(function(){return R}));var c={};a.r(c),a.d(c,"DOMAIN_URL",(function(){return M})),a.d(c,"RESTFULL_API_URL_V2",(function(){return F})),a.d(c,"COOKIE_EXPIRES",(function(){return G})),a.d(c,"SOCKET_CHAT",(function(){return P}));var s=a(0),i=a.n(s),l=a(12),u=a.n(l),p=(a(173),a(48)),m=a(49),d=a(51),h=a(50),f=(a(174),a(21)),g=a(74),b=(a(175),a(160)),E=(a(177),a(105)),v=a(70),O=(a(151),a(101)),_=(a(124),a(72)),L=a(334),j=a(332),y="http://localhost:6700",w="https://medpro-api-v2-testing.medpro.com.vn",C=43200,I="wss://socket.pkh.vn/cable",S="https://static-inside-testing.medpro.com.vn",T="https://medpro-api-v2-testing.medpro.com.vn",A=43200,N="wss://alpha-api.medpro.com.vn/cable",U="https://static-inside-testing.medpro.com.vn",k="https://medpro-api-v2-testing.medpro.com.vn",x=43200,R="wss://alpha-api.medpro.com.vn/cable",M="https://static-inside-testing.medpro.com.vn",F="https://medpro-api-v2-testing.medpro.com.vn",G=43200,P="wss://alpha-api.medpro.com.vn/cable",H={development:n,testing:o,staging:c,production:r},D=H.production;function K(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var V=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,imageUrl:"".concat(D.DOMAIN_URL,"/static/upload/hospitals/").concat(e.props.hospital,"/").concat(e.props.name,".").concat(e.props.typeUrl),isOnSize:!1},e.handleChange=function(t){"uploading"!==t.file.status?("done"===t.file.status&&(K(t.file.originFileObj,(function(t){e.setState({imageUrl:t,loading:!1})})),localStorage.setItem("needRefresh","true")),"error"===t.file.status&&401===t.file.response.statusCode&&e.props.history.push({pathname:"/login",state:{message:"Login to upload!"}})):e.setState({loading:!0})},e.beforeUpload=function(t){return new Promise((function(a,n){var r=t.type===e.props.type;r||_.a.error("You can only upload ".concat(e.props.type," file!"));var o=t.size/1024/1024<5;o||_.a.error("Image must smaller than 5MB!");var c=new Image;c.src=window.URL.createObjectURL(t),c.onload=function(){r&&o&&c.width>100?a(t):n("abc")}}))},e.UNSAFE_componentWillReceiveProps=function(t){e.setState({imageUrl:"".concat(D.DOMAIN_URL,"/static/upload/hospitals/").concat(t.hospital,"/").concat(t.name,".").concat(e.props.typeUrl)})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=i.a.createElement("div",null,this.state.loading?i.a.createElement(L.a,null):i.a.createElement(j.a,null),i.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.state.imageUrl;return i.a.createElement("div",{className:"upload"},i.a.createElement(O.a,{name:this.props.fieldName,listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat(D.DOMAIN_URL,"/upload"),headers:{hospital:this.props.hospital,name:this.props.name,token:"".concat(localStorage.getItem("token"))},beforeUpload:this.beforeUpload,onChange:this.handleChange},t?i.a.createElement("img",{src:t,alt:"",style:{maxHeight:"86px",maxWidth:"86px"}}):e),i.a.createElement("p",null,this.props.label),i.a.createElement("br",null))}}]),a}(i.a.Component),W=Object(f.g)(V),z=(a(82),a(56)),B=a(62),X=a(333),q=(a(232),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fileList:[]},e.handleChange=function(t){var a=Object(B.a)(t.fileList);(a=a.slice(-1)).length>0&&a[0].type!==e.props.type&&(a[0].status="error"),e.setState({fileList:a}),"error"===t.file.status&&401===t.file.response.statusCode&&e.props.history.push({pathname:"/login",state:{message:"Login to upload!"}})},e.beforeUpload=function(t){var a=t.type===e.props.type;a||_.a.error("You can only upload ".concat(e.props.type," file!"));var n=t.size/1024/1024<5;return n||_.a.error("File must smaller than 5MB!"),a&&n},e}return Object(m.a)(a,[{key:"render",value:function(){var e={name:this.props.fieldName,action:"".concat(D.DOMAIN_URL,"/").concat(this.props.action),headers:{hospital:this.props.hospital,name:this.props.name,token:"".concat(localStorage.getItem("token"))},onChange:this.handleChange,beforeUpload:this.beforeUpload,multiple:!0};return i.a.createElement("div",{className:"upload"},i.a.createElement("div",{className:"up_cont"},i.a.createElement(O.a,Object.assign({},e,{fileList:this.state.fileList}),i.a.createElement(z.a,null,i.a.createElement(X.a,null)," Upload"))),i.a.createElement("p",null,this.props.label),i.a.createElement("br",null))}}]),a}(i.a.Component)),J=Object(f.g)(q),Y=(a(330),a(120)),$=Y.a.Option,Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.props.getHospitalList()},e.handleChange=function(t){e.props.changeHospital("".concat(t))},e.showOption=function(){return e.props.hospitalList.map((function(e,t){return i.a.createElement($,{value:e.partnerId,key:t},e.name)}))},e}return Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement(Y.a,{defaultValue:this.props.default,style:{width:320},onChange:this.handleChange,size:"middle"},this.showOption())}}]),a}(i.a.Component),Z=Object(v.b)((function(e){return{hospitalList:e.hospitalList}}),(function(e){return{getHospitalList:function(){e({type:"GET_HOSPITAL_LIST"})}}}))(Q),ee=(a(239),a(63)),te=a.n(ee),ae=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){te.a.post("".concat(D.DOMAIN_URL,"/checkAuth"),{token:localStorage.getItem("token")}).then((function(e){n.setState({isLogin:e.data.isLogin})})).catch((function(e){n.setState({isLogin:!1})})),n.props.getManageContent()},n.changeHospital=function(e){localStorage.setItem("hospital",e),n.setState({hospital:e}),"true"===localStorage.getItem("needRefresh")&&(localStorage.setItem("needRefresh","false"),window.location.reload())},n.showAvatar=function(){var e=n.state.hospital;return(n.props.manageContent[e]?n.props.manageContent[e]:[]).map((function(e,t){return"content"===e.fieldName?i.a.createElement(E.a,{xs:24,sm:12,md:8,lg:4,key:t},i.a.createElement(J,{label:e.label,name:e.name,hospital:n.state.hospital,type:e.type,fieldName:e.fieldName,action:e.action})):i.a.createElement(E.a,{xs:24,sm:12,md:8,lg:4,key:t},i.a.createElement(W,{label:e.label,name:e.name,hospital:n.state.hospital,type:e.type,fieldName:e.fieldName,typeUrl:e.typeUrl}))}))},n.state={hospital:localStorage.getItem("hospital")||"dkkvangiang",isLogin:!0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.isLogin;return i.a.createElement(i.a.Fragment,null,e?i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(Z,{changeHospital:this.changeHospital,default:this.state.hospital,size:"large"}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(b.a,null,this.showAvatar(),i.a.createElement(E.a,{xs:24,sm:12,md:8,lg:4},i.a.createElement(J,{label:"Manage Content",name:"manageContent",hospital:"manageContent",type:"application/json",fieldName:"manageContent",action:"manageContent"})))):i.a.createElement(f.a,{to:{pathname:"/login"}}))}}]),a}(i.a.Component),ne=Object(v.b)((function(e){return{manageContent:e.manageContent}}),(function(e){return{getManageContent:function(){e({type:"GET_MANAGE_CONTENT"})}}}))(ae),re=(a(256),a(81)),oe=(a(258),a(121)),ce={labelCol:{span:8},wrapperCol:{span:8}},se={wrapperCol:{offset:8,span:16}},ie=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onFinish=function(t){te.a.post("".concat(D.DOMAIN_URL,"/login"),{username:t.username,password:t.password}).then((function(t){t.data?(localStorage.setItem("token",t.data),e.props.history.push("/")):alert("Wrong username or password!")})).catch((function(e){console.log(e),alert("Some error have happened!")}))},e.onFinishFailed=function(e){console.log("Failed:",e)},e.componentDidMount=function(){e.props.location.state&&e.props.location.state.message&&alert(e.props.location.state.message)},e}return Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(re.a,Object.assign({},ce,{name:"basic",initialValues:{remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed}),i.a.createElement(re.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},i.a.createElement(oe.a,null)),i.a.createElement(re.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},i.a.createElement(oe.a.Password,null)),i.a.createElement(re.a.Item,se,i.a.createElement(z.a,{type:"primary",htmlType:"submit"},"Submit"))))}}]),a}(i.a.Component),le=[{path:"/",exact:!0,main:function(e){return i.a.createElement(ne,e)}},{path:"/login",exact:!1,main:function(e){return i.a.createElement(ie,e)}}],ue=a(42),pe=Object(ue.a)(),me=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).showContentMenus=function(e){var t=null;return e.length>0&&(t=e.map((function(e,t){return i.a.createElement(f.b,{key:t,path:e.path,exact:e.exact,render:e.main})}))),i.a.createElement(f.d,null,t)},e}return Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement(g.a,{history:pe},i.a.createElement("div",{className:"App"},this.showContentMenus(le)))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(54),he=a(20),fe=a.n(he),ge=a(35),be=a(119),Ee=function(){var e=Object(be.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.a.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){return Ee(e)},Oe=fe.a.mark(je),_e=fe.a.mark(ye),Le=fe.a.mark(we);function je(e){var t,a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ge.b)(ve,"".concat(D.RESTFULL_API_URL_V2,"/mongo/hospital/list"));case 3:if(200===(t=e.sent).status&&!t.data.error_code){e.next=6;break}throw new Error("L\u1ed7i server!");case 6:if(!t){e.next=11;break}return a=t.data,n=a.map((function(e,t){return{name:e.name,partnerId:e.partnerId}})),e.next=11,Object(ge.d)({type:"GET_HOSPITAL_LIST_SUCCESS",payload:n});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,Object(ge.d)({type:"GET_HOSPITAL_LIST_FAIL",error:e.t0});case 17:case"end":return e.stop()}}),Oe,null,[[0,13]])}function ye(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.e)("GET_HOSPITAL_LIST",je);case 2:case"end":return e.stop()}}),_e)}function we(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Object(ge.c)(ye)]);case 2:case"end":return e.stop()}}),Le)}var Ce=function(e){return Ee(e)},Ie=fe.a.mark(Ae),Se=fe.a.mark(Ne),Te=fe.a.mark(Ue);function Ae(e){var t,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ge.b)(Ce,"".concat(D.DOMAIN_URL,"/static/upload/hospitals/manageContent/manageContent.json"));case 3:if(200===(t=e.sent).status&&!t.data.error_code){e.next=6;break}throw new Error("L\u1ed7i server!");case 6:if(!t){e.next=10;break}return a=t.data,e.next=10,Object(ge.d)({type:"GET_MANAGE_CONTENT_SUCCESS",payload:a});case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,Object(ge.d)({type:"GET_MANAGE_CONTENT_FAIL",error:e.t0});case 16:case"end":return e.stop()}}),Ie,null,[[0,12]])}function Ne(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.e)("GET_MANAGE_CONTENT",Ae);case 2:case"end":return e.stop()}}),Se)}function Ue(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Object(ge.c)(Ne)]);case 2:case"end":return e.stop()}}),Te)}var ke=fe.a.mark(xe);function xe(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Object(ge.c)(we),Object(ge.c)(Ue)]);case 2:case"end":return e.stop()}}),ke)}var Re=a(60),Me={username:{value:""},password:{value:""}};var Fe=[];var Ge={};var Pe=Object(de.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_FIELD_LOGIN":return Object(Re.a)(Object(Re.a)({},e),t.payload);default:return e}},hospitalList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_HOSPITAL_LIST":return Object(B.a)(e);case"GET_HOSPITAL_LIST_SUCCESS":return[].concat(Object(B.a)(e),Object(B.a)(t.payload));case"GET_HOSPITAL_LIST_FAIL":return[].concat(Object(B.a)(e),Object(B.a)(t.error));default:return e}},manageContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_MANAGE_CONTENT":return Object(Re.a)({},e);case"GET_MANAGE_CONTENT_SUCCESS":return Object(Re.a)(Object(Re.a)({},e),t.payload);case"GET_MANAGE_CONTENT_FAIL":return Object(Re.a)(Object(Re.a)({},e),t.error);default:return e}}}),He=a(165),De=a(164),Ke=Object(He.a)(),Ve=Object(De.composeWithDevTools)({}),We=Object(de.createStore)(Pe,Ve(Object(de.applyMiddleware)(Ke)));Ke.run(xe),u.a.render(i.a.createElement(v.a,{store:We},i.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.3764f7b2.chunk.js.map