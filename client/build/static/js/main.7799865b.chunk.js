(this.webpackJsonpmedpro_form_content=this.webpackJsonpmedpro_form_content||[]).push([[0],{168:function(e,t,a){e.exports=a(330)},173:function(e,t,a){},174:function(e,t,a){},232:function(e,t,a){},239:function(e,t,a){},260:function(e,t,a){},330:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"DOMAIN_URL",(function(){return j})),a.d(n,"RESTFULL_API_URL_V2",(function(){return I})),a.d(n,"COOKIE_EXPIRES",(function(){return S})),a.d(n,"SOCKET_CHAT",(function(){return U}));var r={};a.r(r),a.d(r,"DOMAIN_URL",(function(){return A})),a.d(r,"RESTFULL_API_URL_V2",(function(){return k})),a.d(r,"COOKIE_EXPIRES",(function(){return C})),a.d(r,"SOCKET_CHAT",(function(){return T}));var o={};a.r(o),a.d(o,"DOMAIN_URL",(function(){return N})),a.d(o,"RESTFULL_API_URL_V2",(function(){return R})),a.d(o,"COOKIE_EXPIRES",(function(){return x})),a.d(o,"SOCKET_CHAT",(function(){return F}));var l={};a.r(l),a.d(l,"DOMAIN_URL",(function(){return P})),a.d(l,"RESTFULL_API_URL_V2",(function(){return H})),a.d(l,"COOKIE_EXPIRES",(function(){return M})),a.d(l,"SOCKET_CHAT",(function(){return D}));var i=a(0),c=a.n(i),s=a(12),p=a.n(s),u=(a(173),a(47)),m=a(48),d=a(50),h=a(49),f=(a(174),a(20)),g=a(73),b=(a(175),a(160)),v=(a(177),a(117)),O=a(61),E=[{label:"header_logo.svg",name:"header_logo",type:"image/svg+xml",typeUrl:"svg",require:!1,fieldName:"logo"},{label:"banner_desktop.png",name:"banner_desktop",type:"image/png",typeUrl:"png",require:!1,fieldName:"image"},{label:"banner_mobile.png",name:"banner_mobile",type:"image/png",typeUrl:"png",require:!1,fieldName:"image"},{label:"slide.png",name:"slide",type:"image/png",typeUrl:"png",require:!1,fieldName:"image"},{label:"logo_header_white.svg",name:"logo_header_white",type:"image/svg+xml",typeUrl:"svg",require:!1,fieldName:"logo"},{label:"footer_logo.svg",name:"footer_logo",type:"image/svg+xml",typeUrl:"svg",require:!1,fieldName:"logo"},{label:"payment_bill.png",name:"payment_bill",type:"image/png",typeUrl:"png",require:!1,fieldName:"image"},{label:"bien_lai.png",name:"bien_lai",type:"image/png",typeUrl:"png",require:!1,fieldName:"image"},{label:"content.json",name:"content",type:"application/json",typeUrl:"json",require:!1,fieldName:"content"}],y=(a(151),a(100)),_=(a(124),a(71)),L=a(335),w=a(334),j="http://localhost:6700",I="https://medpro-api-v2-testing.medpro.com.vn",S=43200,U="wss://socket.pkh.vn/cable",A="https://static-inside-testing.medpro.com.vn",k="https://medpro-api-v2-testing.medpro.com.vn",C=43200,T="wss://alpha-api.medpro.com.vn/cable",N="https://static-inside-testing.medpro.com.vn",R="https://medpro-api-v2-testing.medpro.com.vn",x=43200,F="wss://alpha-api.medpro.com.vn/cable",P="https://static-inside-testing.medpro.com.vn",H="https://medpro-api-v2-testing.medpro.com.vn",M=43200,D="wss://alpha-api.medpro.com.vn/cable",q={development:n,testing:o,staging:l,production:r},G=q.production;function K(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var V=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,imageUrl:"".concat(G.DOMAIN_URL,"/static/upload/hospitals/").concat(e.props.hospital,"/").concat(e.props.name,".").concat(e.props.typeUrl),isOnSize:!1},e.handleChange=function(t){"uploading"!==t.file.status?("done"===t.file.status&&(K(t.file.originFileObj,(function(t){e.setState({imageUrl:t,loading:!1})})),localStorage.setItem("needRefresh","true")),"error"===t.file.status&&401===t.file.response.statusCode&&e.props.history.push({pathname:"/login",state:{message:"Login to upload!"}})):e.setState({loading:!0})},e.beforeUpload=function(t){return new Promise((function(a,n){var r=t.type===e.props.type;r||_.a.error("You can only upload ".concat(e.props.type," file!"));var o=t.size/1024/1024<5;o||_.a.error("Image must smaller than 5MB!");var l=new Image;l.src=window.URL.createObjectURL(t),l.onload=function(){r&&o&&l.width>100?a(t):n("abc")}}))},e.UNSAFE_componentWillReceiveProps=function(t){e.setState({imageUrl:"".concat(G.DOMAIN_URL,"/static/upload/hospitals/").concat(t.hospital,"/").concat(t.name,".").concat(e.props.typeUrl)})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=c.a.createElement("div",null,this.state.loading?c.a.createElement(L.a,null):c.a.createElement(w.a,null),c.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.state.imageUrl;return c.a.createElement("div",{className:"upload"},c.a.createElement(y.a,{name:this.props.fieldName,listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat(G.DOMAIN_URL,"/upload"),headers:{hospital:this.props.hospital,name:this.props.name,token:"".concat(localStorage.getItem("token"))},beforeUpload:this.beforeUpload,onChange:this.handleChange},t?c.a.createElement("img",{src:t,alt:"",style:{maxHeight:"86px",maxWidth:"86px"}}):e),c.a.createElement("p",null,this.props.label),c.a.createElement("br",null))}}]),a}(c.a.Component),W=Object(f.g)(V),z=(a(81),a(55)),B=a(62),X=a(333),J=(a(232),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fileList:[]},e.handleChange=function(t){var a=Object(B.a)(t.fileList);a=a.slice(-1),console.log(a),a.length>0&&a[0].type!==e.props.type&&(a[0].status="error"),e.setState({fileList:a}),"error"===t.file.status&&401===t.file.response.statusCode&&e.props.history.push({pathname:"/login",state:{message:"Login to upload!"}})},e.beforeUpload=function(t){var a=t.type===e.props.type;a||_.a.error("You can only upload ".concat(e.props.type," file!"));var n=t.size/1024/1024<5;return n||_.a.error("File must smaller than 5MB!"),a&&n},e}return Object(m.a)(a,[{key:"render",value:function(){var e={name:this.props.fieldName,action:"".concat(G.DOMAIN_URL,"/upload"),headers:{hospital:this.props.hospital,name:this.props.name,token:"".concat(localStorage.getItem("token"))},onChange:this.handleChange,beforeUpload:this.beforeUpload,multiple:!0};return c.a.createElement("div",{className:"upload"},c.a.createElement("div",{className:"up_cont"},c.a.createElement(y.a,Object.assign({},e,{fileList:this.state.fileList}),c.a.createElement(z.a,null,c.a.createElement(X.a,null)," Upload"))),c.a.createElement("p",null,this.props.label),c.a.createElement("br",null))}}]),a}(c.a.Component)),Y=Object(f.g)(J),Z=(a(331),a(119)),$=Z.a.Option,Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.props.getHospitalList()},e.handleChange=function(t){e.props.changeHospital("".concat(t))},e.showOption=function(){return e.props.hospitalList.map((function(e,t){return c.a.createElement($,{value:e.partnerId,key:t},e.name)}))},e}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement(Z.a,{defaultValue:this.props.default,style:{width:320},onChange:this.handleChange,size:"middle"},this.showOption())}}]),a}(c.a.Component),ee=Object(O.b)((function(e){return{hospitalList:e.hospitalList}}),(function(e){return{getHospitalList:function(){e({type:"GET_HOSPITAL_LIST"})}}}))(Q),te=(a(239),a(63)),ae=a.n(te),ne=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){ae.a.post("".concat(G.DOMAIN_URL,"/checkAuth"),{token:localStorage.getItem("token")}).then((function(e){n.setState({isLogin:e.data.isLogin})})).catch((function(e){n.setState({isLogin:!1})}))},n.changeHospital=function(e){localStorage.setItem("hospital",e),n.setState({hospital:e}),"true"===localStorage.getItem("needRefresh")&&(localStorage.setItem("needRefresh","false"),window.location.reload())},n.showAvatar=function(){return E.map((function(e,t){return"content"===e.fieldName?c.a.createElement(v.a,{xs:24,sm:12,md:8,lg:4,key:t},c.a.createElement(Y,{label:e.label,name:e.name,hospital:n.state.hospital,type:e.type,fieldName:e.fieldName})):c.a.createElement(v.a,{xs:24,sm:12,md:8,lg:4,key:t},c.a.createElement(W,{label:e.label,name:e.name,hospital:n.state.hospital,type:e.type,fieldName:e.fieldName,typeUrl:e.typeUrl}))}))},n.state={hospital:localStorage.getItem("hospital")||"dkkvangiang",isLogin:!0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.isLogin;return c.a.createElement(c.a.Fragment,null,e?c.a.createElement("div",null,c.a.createElement(ee,{changeHospital:this.changeHospital,default:this.state.hospital,size:"large"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(b.a,null,this.showAvatar())):c.a.createElement(f.a,{to:{pathname:"/login"}}))}}]),a}(c.a.Component),re=Object(O.b)(null,null)(ne),oe=(a(256),a(80)),le=(a(258),a(120)),ie=(a(260),{labelCol:{span:8},wrapperCol:{span:8}}),ce={wrapperCol:{offset:8,span:16}},se=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onFinish=function(t){ae.a.post("".concat(G.DOMAIN_URL,"/login"),{username:t.username,password:t.password}).then((function(t){t.data?(localStorage.setItem("token",t.data),e.props.history.push("/")):alert("Wrong username or password!")})).catch((function(e){console.log(e),alert("Some error have happened!")}))},e.onFinishFailed=function(e){console.log("Failed:",e)},e.componentDidMount=function(){e.props.location.state&&e.props.location.state.message&&alert(e.props.location.state.message)},e}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(oe.a,Object.assign({},ie,{name:"basic",initialValues:{remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed}),c.a.createElement(oe.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},c.a.createElement(le.a,null)),c.a.createElement(oe.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.a.createElement(le.a.Password,null)),c.a.createElement(oe.a.Item,ce,c.a.createElement(z.a,{type:"primary",htmlType:"submit"},"Submit"))))}}]),a}(c.a.Component),pe=Object(O.b)((function(e){return{login:e.login}}),(function(e){return{checkZabbixToken:function(e){},loginZabbix:function(){},onSaveFieldLogin:function(e){}}}))(se),ue=[{path:"/",exact:!0,main:function(e){return c.a.createElement(re,e)}},{path:"/login",exact:!1,main:function(e){return c.a.createElement(pe,e)}}],me=a(41),de=Object(me.a)(),he=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).showContentMenus=function(e){var t=null;return e.length>0&&(t=e.map((function(e,t){return c.a.createElement(f.b,{key:t,path:e.path,exact:e.exact,render:e.main})}))),c.a.createElement(f.d,null,t)},e}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement(g.a,{history:de},c.a.createElement("div",{className:"App"},this.showContentMenus(ue)))}}]),a}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=a(53),ge=a(40),be=a.n(ge),ve=a(58),Oe=a(118),Ee=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae.a.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(e){return Ee(e)},_e=be.a.mark(je),Le=be.a.mark(Ie),we=be.a.mark(Se);function je(e){var t,a,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ve.b)(ye,"".concat(G.RESTFULL_API_URL_V2,"/mongo/hospital/list"));case 3:if(200===(t=e.sent).status&&!t.data.error_code){e.next=6;break}throw new Error("L\u1ed7i server!");case 6:if(!t){e.next=11;break}return a=t.data,n=a.map((function(e,t){return{name:e.name,partnerId:e.partnerId}})),e.next=11,Object(ve.d)({type:"GET_HOSPITAL_LIST_SUCCESS",payload:n});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,Object(ve.d)({type:"GET_HOSPITAL_LIST_FAIL",error:e.t0});case 17:case"end":return e.stop()}}),_e,null,[[0,13]])}function Ie(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.e)("GET_HOSPITAL_LIST",je);case 2:case"end":return e.stop()}}),Le)}function Se(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.a)([Object(ve.c)(Ie)]);case 2:case"end":return e.stop()}}),we)}var Ue=be.a.mark(Ae);function Ae(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.a)([Object(ve.c)(Se)]);case 2:case"end":return e.stop()}}),Ue)}var ke=a(121),Ce={username:{value:""},password:{value:""}};var Te=[];var Ne=Object(fe.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_FIELD_LOGIN":return Object(ke.a)(Object(ke.a)({},e),t.payload);default:return e}},hospitalList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_HOSPITAL_LIST":return Object(B.a)(e);case"GET_HOSPITAL_LIST_SUCCESS":return[].concat(Object(B.a)(e),Object(B.a)(t.payload));case"GET_HOSPITAL_LIST_FAIL":return[].concat(Object(B.a)(e),Object(B.a)(t.error));default:return e}}}),Re=a(165),xe=a(164),Fe=Object(Re.a)(),Pe=Object(xe.composeWithDevTools)({}),He=Object(fe.createStore)(Ne,Pe(Object(fe.applyMiddleware)(Fe)));Fe.run(Ae),p.a.render(c.a.createElement(O.a,{store:He},c.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.7799865b.chunk.js.map